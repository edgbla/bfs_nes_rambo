
MISC

- Как оказывается со многими говенными с виду играми, в которые в детстве играл и плакал, когда игра тебя унижала, если заглянуть в нее с обратной стороны, изнутри, то оказывается, что там много интересного. Зная такие внутренние секреты, играть в игру становится гораздо интересней.
- Несмотря на внешнюю неказистость и простоту, все диалоги и катсцены закодированы специальными скриптами, включая титульный экран и концовки, что довольно прогрессивно для денди игр такого возраста.
- Различия между японской и английской версиями не ограничиваются быстрым говенным. Судя по всему, из японки до кучи повыкидывали некоторые куски:
	- Надпись на титульнике со слоганом фильма, написанное с ошибкой, выкинули из скриптов.
	- Титры в конце игры выкинули целиком, потому что место, отведенное для них в роме, было занято текстом с биографией Рэмбо, который в американской версии очевидно весит больше. Дополнительно в американке, при обрезании "лишних" скриптов концовки, не учли, что при переключении скриптов происходит стирание всех предыдущих иконок персонажей и в финальных титрах рисуется только одна картинка Рэмбо в нижнем правом углу. В американке не добавили никакой команды для стирания верхней иконки Рэмбо после его первой и последней реплики в перед вырезанными титрами, и обе иконки остаются на экране вместе.
	- По логике скриптов изменений почти нет, кроме одного явного места, когда приходится возвращаться за заключенным во второй раз. В японке возврат происходит в точку высадки  с вертолета и начинается с реплики Ко, что "лагерь вон в ту сторону"
	- Но по текстам диалогов есть пара мест, где японский скрипт нещадно вымаран:
		- При переводе куска скрипта, где Рэмбо приходит к лодке без Ко, в японской версии Генерал дает просто отлуп одной строкой. В американке, судя по добавке лишних переходов, хотели сделать какое-то ветвление,, разделив фразу на две и поставив выпрыг на вторую, но выпрыг этот никогда не получает управления, и Генерал всегда говорит две фразы подряд независимо ни от чего другого, чем Ко.
		- Когда Рэмбо спрашивает у Ко, нравится ли он ей, вместо того, где деревня, в японской версии был сделан
		дополнительный акцент. Она говоит там не просто "ну да, ты ничего", а наоборот "ты КРА.САВ.ЧИК".
		- Диалог с Генералом, когда Ко с Рэмбо, в американке сокращен до двух односложных фраз. В японке генерал говорит гораздо больше, чем просто "ОК". Тут видимо кто-то схалявил.
		- Диалог на лодке с Ко, когда она дарит свой ПЕДАНТ, в японке гораздо длиннее. Почему-то в американке выбросили все начало диалога и с места в карьер начали с "ой, какое украшение".
		- Перед переходом на сцену допроса Рэмбо, схваченного врагами, в японской версии идет диалог ("...а тем временем в штабе") Мэрдока и Траумана, в котором показывается, какой Мэрдок гандон. Отсюда становится понятным сюжетный ход в конце игры, где Мэрдок оправдывается. В американке сцену просто выбросили.
		- В сцене допроса, Падовски вызывает сержанта Ясина (Юсина в японской версии), и в японской версии он ПРИХОДИТ! Это дикий амбал, который говорит не по-человечески (БАКИ БОКУ БАСИ БАСИ) и начинает пытать Рэмбо (тот кричит). В американке этот момент зачем-то вычистили и Падовски переходит сразу к побуждению Рэмбо связаться с базой.
		- В локации $0C, где можно отдохнуть, ходит чувак с киркой. Если поговорить с ним в японской версии, он разразится длинным диалогом о деревне. В американке ему оставили лишь одно слов "привет".
		- И наконец, в американке прибили сценку перед титрами. В японке каждый отдельный игровой персонаж произносит коротенькую фразу с приветствием или поздравлением, а затем уже идут титры, в американке в этом месте печатается только "спасибо за усилия".
- Предмет ПЕДАНТ в игре не несет никакой сюжетной нагрузки, кроме того, что Ко восполняет жизнь Рэмбо во время диалога. Так же, как и предмет БАНДАНА, который рэмбо получает, если в деревне поговорит с Ко перед эвакуацией. Этот диалог ведет к тому, что Ко умирает в Джунглях, а Рэмбо возвращается на базу в Бандане и один.
- Система паролей в игре запоминает полное состояние текущего сценария, параметры игрока и его локацию. Она довольно сильно избыточна, но некоторые параметры проверяются постоянно во время игры и программа обрезает значения, когда надо. Но пароли могут выдаваться только в местах, где присутствуюют диалоги. В игре нельзя сохраниться посреди локации. Но сгенерированный вручную пароль, как ни странно, это позволяет. Можно в принципе переделать логику генерации пароля в игре и вызывать экран в любое время, сохраняясь в любой локации в любое время.
- В игровых скриптах нет ни одного выбора между более чем двумя опциями. В коде игры присутствует еще два режима для выбора между тремя и четырьмя опциями, нигде не используемые.

SECRETS

- Во время игры, нажать ВНИЗ 100 раз, не нажимая другие кнопки, чтобы добавить 15 ЕХР.
- Во время игры, нажать каждую кнопку Д-Пад по разу 16 раз подряд для добавления 1 пополнения жизней. Проще всего просто давить быстро кнопки Д-Пада, пока не прозвучит звук.
- В некоторых локациях (вся русская база после водопада, за исключением комнаты с боссами - комнаты 49, 4А, 4C-53, 56-5C) и ближе к самому концу (комната 7B), если убить первый в списке вражеский объект (проще убить всех, хз который из них первый), подождать 16 игровых минут (игровая минута в 6 раз быстрее реального времени, т.е. примерно 3 минуты реального времени), то упадет приз-голова Рэмбо и добавит либо 100 патронов к случайному оружию, либо 100 жизней, либо временную неуязвимость.
- В некоторых локациях статические призы спрятаны не только явно в одном из ящиков, но и могут быть просто скрыты в произвольном месте без опознавательных знаков. Обычно это бонус "J" в локациях, где он наиболее востребован:
	- Локация $19 (в районе водопада, надо прыгать по крупным камням под постоянным камнепадом сверху, перед тем, как попасть в точку эвакуации), при движении справа налево, прыгнуть на второй самый нижний блок, присесть и выстрелить под камень справа - вылетит бонус "J". Пройти данную локацию с этим бонусом становится очень просто.
	- Локация $23 (мост с узырями за два экрана левее начала лагеря русских с военнопленными, там где Рэмбо разделяется с Ко), если Рэмбо не повезло свалиться под мост, не обязательно выходить через Северный ворп, если присесть перед левым крайним столбом моста и ударить, вылетить также приз "J", с ним можно сразу выбраться из ловушки и продолжить игру.
- Взять с собой на базу Ко можно не только в самом конце, если не поговорить с ней возле водопада, но и с самого начала, если привезти только фотографии заключенного вместо самого заключенного. В диалоге перед первой эвакуацией будут две опции: взять с собой Ко или оставить ее тут. Если заключенный взят, то опция взять с собой Ко автоматически отпадает и она остается в Джунглях, чтобы потом помочь Рэмбо освободиться из плена. Тут она покупает платье и в нем же остается на военной базе после окончательного возвращения. Что характерно, если Ко прилетает на базу во время первой эвакуации, то она будет в ТОМ ЖЕ платье, что и второй раз, хотя она его еще не покупала. Опять же, небольшой провальчик в сюжете есть в том, что, когда Рэмбо повторно отправляют в джунгли, Ко ссылают вместе с ним, даже если он взял ее на базу.

BUGS

- По адресу D936 сидит циклик, чистящий некий флаг в массиве основных объектов. Так как в этом месте явно не инициализирован регистр Х (хотя в коде есть загрузки нужных параметров, до Х не доходит), циклик чистит явно не то (попадает частично на область массива летающи объектов, часть временных переменных и наконец очищает бит 0х20 индексов приза у вражеских объектов). Если разбираться детально, то у индексов призов нет индекса больше 0х20, поэтому на врагов это не оказывает никакого влияния; в области временных переменных значение иногда портится, но дальше в коде сразу перезаписывается другими временными данными и никак на работу не влияет. Далее, если добавить правильную загрузку регистра Х, то циклик начнет чистить флажок временной неуязвимости, приходящиеся на переменную флагов статуса объект. Он используетя для того, чтобы враг не мог ударить больше одного раза подряд. Если чистить этот бит перед просчетом коллизий, герой не только становится неуязивимым, но и начинает "застревать" во врагах. Так что получается, этот цикл вообще тут не нужен и является каким-то остатком от разработки, который по недоразумению не убрали, а по случайному стечению обстоятельств он не приносит никакого вреда игре.
- Очень часто Рэмбо подпрыгивает в воздухе после разговора с персонажами. Процедуры чтения кнопок для диалогов и игры разделены и исполняются каждый в своем лупе вне НМИ хендлера. Диалоговое окно при чтении кнопок отсекает ненужные срабатывания путем ожидания отпускания, а потом снова нажатия, но не делает проверку на отпускание перед выходом. Соответственно, неотпущенная кнопка остается активной в памяти до тех пор, пока главный цикл снова не получит управления, а получает он управление только когда все данные в ППУ сброшены во время НМИ, т.е. все засетки палитры и т.п. кнопка считается нажатой. В общем там проще сделать проверку на отпускание кнопки после диалога.
- TODO Изредка спрайты на экране двоятся или расслаиваются от кадра к кадру.

ALGOS

- Движок игры достаточно детерминирован: в каждой отдельной локации могут находиться только 8 основных объектов или меньше, также в локации может быть не больше двух выходов справа и слева и не больше двух выходов на север или юг, причем "северный" выход всегда слева на уровне, а "южный" - справа. Совсем не обязательно, что ведут ни именно на север, но в ресурсах игры четверки индексов ворпов располагаются именно в такой последовательности: левый выход, правый выход, левый ворп, правый ворп. Уровень, у которого нет ворпа на выход или слева или справа, имеет отдельный флаг в таблицах параметров локаций. Края уровней в таких локациях прокрашиваются пустыми блоками, препятствующими проходу.
- Так как игра поддерживает всего 8 общих объектов на локации и 12 прожектайлов и вспомогательных объектов, каждая локация имеет фиксированный набор врагов. нулевой объект - это всегда сам Рэмбо, остается 7 - из них предпоследний обычно не занят, а последний всегда зарезервирован. Итого получается на каждый уровень приходится от 1 до 6 предопределенных врагов.
- Для разнообразия и увеличения сложности, только в дневное время и только для двух типов объектов (птыгающий шар и все солдаты типа Б), добавлено размножение этих врагов. Дубликаты добавляются в противоположный от положения Рэмбо конец локации и только в два слота 4-ый и 6-ой (если они не заняты). Таким образом число врагов в локации в дневное время увеличивается до двух человек. Ночью они не вылезают.
- Призы из врагов вылетают не рандомно - у каждого врага есть некий индекс, который определяет, что будет из него вылетать. Практически все такие признаки по дефолту означают очки.  Приз назначается при загрузке уровня одному отдельному врагу - первому в списке объектов, заменяя его признак очков на один фиксированный вид приза по таблице, фиксированный для каждой локации по отдельной таблице. Порядок врагов на уровне не обязательно линейный, так что первый объект может располагатся где угодно в каком угодно порядке. К некоторым локациям приза не привязано, так что ни один враг в них ничего не дает. Такая схема используется в 99 процентах локаций.
- Есть исключения из вышеописанной схемы. В таблице параметров врагов есть три, у которых вместо очков изначально указаны три приза C, D и Е (24 - Солдат с базукой (дает стрелы), 31 - Мужик с мачете (дает взрывающиеся стрелы) и 32 - Костяная Обезьяна (дает патроны для автомата). Все три персонажа используются исключительно на военной базе русских в ангарах и некоторых локациях. В таких локациях, каждый враг оставляет призы и там можно легко подкачаться перед финальной битвой.

UNUSED
- Бонус с индексом $13, не используется ни в одной локации, ни в каком объекте врага. Дает временную неуязвимость, не имеет анимации вылета из тела после убийства врага. Такая же неуязвимость в числе прочего дается за секретный приз, упомянутый выше.